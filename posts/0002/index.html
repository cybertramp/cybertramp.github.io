<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1">
    <title>MongoDB 설치 및 사용 - Inkblotty</title>

    <style type="text/css">
        img.wp-smiley,
        img.emoji {
            display: inline !important;
            border: none !important;
            box-shadow: none !important;
            height: 1em !important;
            width: 1em !important;
            margin: 0 .07em !important;
            vertical-align: -0.1em !important;
            background: none !important;
            padding: 0 !important;
        }
    </style>
    <link rel='stylesheet' href='https://cybertramp.net/css/style.css' type='text/css' media='all' />
    <link rel='stylesheet' href='https://cybertramp.net/css/custom.css' type='text/css' media='all' />
        
</head>
    <body class="two-column">
        <a href="#content">Skip to content</a>
<div class="wrapper">
    <header role="banner" class="banner widgets columns-1">
        <a href="/" rel="home">
            <h1 class="site">Inkblotty</h1>
            <p></p>
        </a>
        <nav role="navigation" aria-label="Primary Navigation">

            <ul class="menu">
                <li class="menu-item "><a class="menu__link" href="/about/">ABOUT</a></li>
            </ul>
            <select onChange="location.href=value;">
                <option value="/about/" class="menu-item menu-item-type-custom menu-item-object-custom" >ABOUT</option>
            </select>
        </nav>
    </header>

    <br>
    <div style="width: 100%; max-height: 100px; text-align: center;">
       
</div>

    <div class="breadcrumbs">
        
    </div>
        <div id="content" class="content">

<main role="main">
    <article role="article" class="post type-post format-standard hentry">
        <header class="post-header">
            <h1>MongoDB 설치 및 사용</h1>
            <div class="post-details">
                <a rel="bookmark">
                    <time datetime="2020-06-15T615:1212:306">2020-06-15</time>
                </a>
				
<span style="float: right;">
    <div id="fb-root" style="height: 100%;"></div>
    
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2"></script>
    
    <div class="fb-share-button" data-href="https://cybertramp.net/posts/0002/" data-layout="button_count" data-size="small">
        <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fcybertramp.net%2fposts%2f0002%2f" class="fb-xfbml-parse-ignore">Share</a>
    </div>
    &nbsp;
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-text="MongoDB 설치 및 사용" data-url="https://cybertramp.net/posts/0002/" data-show-count="false">Tweet</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    &nbsp;
    
</span>

            </div>
        </header>

        <div class="post-content">
            <p><img src="" alt="./img002"></p>
<p><a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/">참고</a></p>
<h3 id="1-키-추가">1. 키 추가</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget -qO - https://www.mongodb.org/static/pgp/server-4.2.asc | sudo apt-key add -
</code></pre></div><h3 id="2-레포지토리-추가">2. 레포지토리 추가</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">echo <span style="color:#e6db74">&#34;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu bionic/mongodb-org/4.2 multiverse&#34;</span> | sudo tee /etc/apt/sources.list.d/mongodb-org-4.2.list
</code></pre></div><h3 id="3-패키지-최신화-및-설치">3. 패키지 최신화 및 설치</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt update
sudo apt-get install -y mongodb-org
</code></pre></div><h3 id="4-서비스-시작">4. 서비스 시작</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">service mongod start
service mongod enable
service mongod status
</code></pre></div><h3 id="5-관리자-계정-생성">5. 관리자 계정 생성</h3>
<p>MongoDB CLI를 통해 인증을 위한 관리자 계정을 생성한다.</p>
<p><code>mongo</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">use admin
db.createUser<span style="color:#f92672">(</span>
  <span style="color:#f92672">{</span>
    user: <span style="color:#e6db74">&#34;원하는 계정 이름&#34;</span>,
    pwd: <span style="color:#e6db74">&#34;패스워드&#34;</span>,
    roles: <span style="color:#f92672">[</span><span style="color:#e6db74">&#39;root&#39;</span><span style="color:#f92672">]</span>
  <span style="color:#f92672">}</span>
<span style="color:#f92672">)</span>
</code></pre></div><h3 id="6-mongodb-바인딩-설정-및-관리자-계정-설정">6. MongoDB 바인딩 설정 및 관리자 계정 설정</h3>
<p>기본적으로 처음에 127.0.0.1로 바인딩 되게 설정되어 있으므로 수정해주어야 외부에서 접근이 가능하다. 또한 MongoDB는 기존 Mysql or MariaDB와 달리 설치시 계정을 설정하지 않는다. 따라서 보안을 위해 따로 설정을 해주어야한다.</p>
<p><code>/etc/mongod.conf</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># network interfaces</span>
net:
  port: <span style="color:#ae81ff">27017</span>
  bindIp: 0.0.0.0
  
<span style="color:#75715e"># Authentication</span>
security:
	authorization: enabled
</code></pre></div><h3 id="7-접속-확인">7. 접속 확인</h3>
<p>세가지 방법이 가능하다. 커맨드를 통해 or 쉘에 들어가있는 상태 or ORM을 통한 접속 확인</p>
<ul>
<li>
<p>커맨드</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mongo -u <span style="color:#e6db74">&#34;admin&#34;</span> -p --authenticationDatabase <span style="color:#e6db74">&#34;admin&#34;</span>
</code></pre></div></li>
<li>
<p>쉘</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">use admin
db.auth<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;계정&#34;</span>, <span style="color:#e6db74">&#34;암호&#34;</span> <span style="color:#f92672">)</span>
</code></pre></div></li>
<li>
<p>Mongoose</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mongoose.connect<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;mongodb://계정:암호@호스트:포트/admin&#39;</span>, <span style="color:#f92672">{</span> dbName: <span style="color:#e6db74">&#39;사용할 데이터베이스&#39;</span> <span style="color:#f92672">})</span>;
</code></pre></div></li>
</ul>
<blockquote>
<p>몽고 DB는 실제로도 DB에 계정을 설정안해 암호화 당하고 비트코인 요구를 당한 적이 있으니 필이 계정을 설정하여 접근하는 것이좋다.</p>
</blockquote>

        </div>

        <div>
        <div id="disqus_thread"></div>
        <script>

            



(function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://https-cybertramp-net.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

        </div>

        <footer class="post-footer">
                
                
                
                <span class="post-categories">
                        <a href="https://cybertramp.net/categories/db/">DB</a>&emsp;
                        
                </span>
                
        
                
                
                
        </footer>
        
<table cellspacing="15" style="width:100%; border: none;">
    <tr>
        <td style="text-align: center; border: none; padding: 0px;">
        </td>
        <td style="text-align: center; border: none; padding: 0px;">
        </td>
    </tr>
</table>

        
    </article>

    

</main>


        <div class="sidebar1 widgets columns-1">

    <aside>
    
</aside>
    <aside class="widget widget_categories">
        <h2></h2>
        <ul class="widget__list"><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/daily/">daily (1)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/db/">DB (1)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/opencv/">opencv (1)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/ppc64/">ppc64 (1)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/ssd/">ssd (1)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/tip/">tip (2)</a>
            </li><li class="cat-item cat-item-2">
                <a href="https://cybertramp.net/categories/webserver/">webserver (1)</a>
            </li>
        </ul>
    </aside>

    <aside class="widget widget_tag_cloud">
        <h2></h2>
        <div class="tagcloud">
        </div>
    </aside>

    <aside class="widget widget_recent_entries">
        <h2></h2>
        <ul>
        </ul>
    </aside>

    <aside class="widget widget_archive">
        <h2></h2>
        <ul>
        </ul>
    </aside>

</div>
        </div>
        </div>
<footer role="contentinfo" class="document-footer contentinfo widgets columns-1">

    <aside class="widget widget_text">
        <div class="textwidget">
            <p>© Inkblotty / Powered by <a href="https://gohugo.io" target="_blank">Hugo</a> with theme <a href="https://github.com/tosi29/inkblotty" target="_blank">Inkblotty</a></p>
        </div>
    </aside>
</footer>
</div>

    </body>
</html>
